<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="V3_Item">

	<select id="selectLastSequence" resultType="String">
		SELECT
		SEQ_V3_ITEM_CODE.NEXTVAL FROM DUAL
	</select>

	<insert id="insertItem1" parameterType="V3_Item">
		INSERT INTO V3_ITEM(code,
		name, content, price, qty, date1)
		VALUES (#{code},
		#{name},
		#{content},
		#{price},
		#{qty},
		SYSDATE)
	</insert>

	<insert id="insertItem2" parameterType="V3_Item">
		INSERT INTO
		V3_ITEM_IMAGE(code, img1, img2, img3, img4, img5, date1)
		VALUES(#{code},
		#{img1, jdbcType=BLOB},
		#{img2, jdbcType=BLOB},
		#{img3, jdbcType=BLOB},
		#{img4, jdbcType=BLOB},
		#{img5, jdbcType=BLOB},
		SYSDATE)

	</insert>

	<select id="insertItem3" statementType="CALLABLE" parameterType="V3_Item">
		call V3_ITEM_INSERT(
		#{code},
		#{name},
		#{content},
		#{price},
		#{qty},
		#{img1, jdbcType=BLOB},
		#{img2,
		jdbcType=BLOB},
		#{img3, jdbcType=BLOB},
		#{img4, jdbcType=BLOB},
		#{img5,
		jdbcType=BLOB} )
	</select>

	<select id="selectItemList" resultType="V3_Item">
		SELECT * FROM V3_ITEM
	</select>
	
	<resultMap type="V3_Item" id="resultImg" >
		<result column="img1" property="img1" jdbcType="BLOB"/>
	</resultMap>
	<select id="selectBlobImg" parameterType="String" resultMap="resultImg">
		SELECT code, img1 FROM V3_ITEM_IMAGE WHERE code=#{code}
	</select>
	
	<select id="selectItemOne" parameterType="String" resultType="V3_Item">
		SELECT * FROM V3_ITEM WHERE code=#{code}
	</select>
	
	<resultMap type="V3_Item" id="resultImg1" >
		<result column="img1" property="img1" jdbcType="BLOB"/>
	</resultMap>
	<select id="selectBlobImg1" parameterType="V3_Item" resultMap="resultImg1">
		SELECT code, ${img_tabel_name} img1 FROM V3_ITEM_IMAGE WHERE code=#{code}
	</select>

</mapper>